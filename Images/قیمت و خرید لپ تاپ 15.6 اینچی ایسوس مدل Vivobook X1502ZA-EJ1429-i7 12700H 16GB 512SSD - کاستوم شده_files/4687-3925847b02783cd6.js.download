(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4687],{23075:function(e,t,r){"use strict";r.d(t,{y:function(){return I}});var i=r(66383),n=r(52322),o=r(2784),s=r(16514),l=r(97411),a=r(64177),c=r(8155),d=r(72677),u=r(98780),p=r(31909),m=r(98723),f=r(23154);function v(e){var t=e.brandUrl,r=e.brandImage,i=e.brandTitle,o=e.className,s=e.onShowMoreClick,l=(0,d.d)("h-full flex flex-col justify-center items-center pl-3 px-0 lg:px-8 py-5",o),c=(0,a.C)().isDesktop;return(0,n.jsxs)("div",{className:l,children:[(0,n.jsxs)("div",{className:"flex items-center mb-2 lg:mb-4",children:[(0,n.jsx)("span",{className:"text-icon-low-emphasis text-caption ml-1",children:"سفارشی"}),(0,n.jsx)(u.J,{icon:"ads",size:14,color:(0,f.$)("color-ad")})]}),(0,n.jsx)(m.r,{to:t,onClick:s,shouldHandleUrlAndOnClick:!0,children:(0,n.jsx)(p.E,{image:r,alt:i,title:i,width:c?80:72,height:c?80:72})}),(0,n.jsx)("div",{className:"max-w-[80px] text-center ellipsis-2 text-body2-strong color-heading mt-2 lg:mt-3",children:i})]})}var x=r(70865),h=r(48976),g=r(57306),C=r(33846),b=r(89592),_=r(4886),y=r(69932);function j(e){var t=e.product,r=e.brandId,o=e.position,s=e.hasBorder,l=(0,a.C)().isDesktop,u=t||{},f=u.productImage,v=u.productTitleFa,j=u.productProperties,I=u.productUrl,P=u.productId,O=u.productTitle,w=u.productDefaultVariant,N=u.dataLayer,L=j||{},k=L.productPropertiesIsFake,S=L.productPropertiesAd,T=L.productPropertiesIsAd,R=w||{},F=R.productVariantPriceSellingPrice,E=R.productVariantPriceDiscountPercent,A=R.productVariantPriceRrpPrice,Z=(0,x.Z)({id:P,name:O,price:F,isAd:T},N),D=function(){T?(0,_.x)({id:P,promotionName:v,price:F,isAd:T,dataLayer:N}):(0,b.Hw)(Z)},M=function(){T&&(0,c.nO)({isInBrandCarousel:!0,productId:P,ad:S,brandId:r,position:o})},B=function(){(null==S?void 0:S.provider)==="adverge"&&(0,y.Je)({adIds:[null==S?void 0:S.id]})},K=(0,i.Z)((0,C.Z)({callback:function(){T&&((0,c.c2)({ad:S,productId:P,position:o}),(null==S?void 0:S.provider)==="adverge"&&(0,y.wh)({adIds:[null==S?void 0:S.id]}))}}),1)[0];return(0,n.jsx)(m.r,{to:I,onClick:function(){D(),B(),M()},shouldHandleUrlAndOnClick:!0,children:(0,n.jsxs)("div",{className:(0,d.d)("py-2 lg:py-6 px-3 lg:px-4",{"border-complete-l":s}),ref:K,children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(p.E,{image:f,width:l?150:120,height:l?150:120,className:"rounded-md overflow-hidden"}),k&&(0,n.jsx)(h.C,{className:"absolute left-0 bottom-0",textColor:"text-hint-text-caution",type:"warning",size:"small",text:"غیر اصل"})]}),(0,n.jsx)("span",{title:v,className:"text-body2-strong !font-medium mt-1 lg:mt-2 ellipsis-1 max-w-[150px] overflow-hidden",children:v}),(0,n.jsx)(g.t,{className:(0,d.d)("bg-red flex flex-col mt-1 h-9",{"!justify-start !items-start":E,"!flex-row !justify-start !items-end":!E}),price:A,sellingPrice:F,discount:E,productDiscountPercent:E,discountOnTop:!0,compactPrice:!0})]})})}function I(e){var t,r,u,p=e.advertisement,m=e.position,f=e.className,x=p||{},h=x.advertisementBrand,g=x.advertisementProducts,C=x.advertisementCampaignId,b=x.advertisementSellerId,_=h.brandTitle,y=h.brandImage,I=h.brandUrl,P=h.brandLandingUrl,O=h.brandId,w=(0,d.d)("lg:rounded-large relative lg:border-complete-200 lg:py-0 py-2",f),N=(0,i.Z)((0,s.Z)({eventData:{productIds:null==g?void 0:g.map(function(e){return null==e?void 0:e.productId}),isInBrandCarousel:!0,brandId:O,ad:{campaignId:C,sellerId:b||(null==g?void 0:null===(t=g[0])||void 0===t?void 0:null===(r=t.productDefaultVariant)||void 0===r?void 0:null===(u=r.productVariantSeller)||void 0===u?void 0:u.productSellerId)}},callback:c.c2}),1)[0],L=function(){var e,t,r;(0,c.nO)({isInBrandCarousel:!0,brandId:O,ad:{campaignId:C,sellerId:b||(null==g?void 0:null===(e=g[0])||void 0===e?void 0:null===(t=e.productDefaultVariant)||void 0===t?void 0:null===(r=t.productVariantSeller)||void 0===r?void 0:r.productSellerId)}})},k=(0,a.C)().isDesktop,S=(0,o.useMemo)(function(){var e=null==g?void 0:g.map(function(e,t){return(0,n.jsx)("div",{className:0===t?"rounded-r overflow-hidden lg:rounded-none":"",children:(0,n.jsx)(j,{product:e,brandId:O,position:m+t,hasBorder:k})},null==e?void 0:e.productId)});return null==e||e.unshift((0,n.jsx)(v,{brandUrl:P||I,brandImage:y,brandTitle:_,onShowMoreClick:L},"SponsoredBrandCarouselAdCard")),e},[O,y,_,I,P,g]);return(null==g?void 0:g.length)?(0,n.jsx)("div",{className:w,ref:N,children:(0,n.jsx)(l.l,{spaceBetween:0,items:S,className:"items-center pr-5 pl-0 lg:pl-0 lg:pr-0"})}):null}},27876:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});var i=r(70865),n=r(52322),o=r(63222),s=r(27314);function l(e){var t=(0,s.e)().redirect;return(0,n.jsx)(o.t,(0,i.Z)({redirect:t},e))}},4236:function(e,t,r){"use strict";r.d(t,{R:function(){return O}});var i=r(47842),n=r(70865),o=r(96670),s=r(52322),l=r(2784),a=r(72610),c=r(47072),d=r(16991),u=r(12317),p=r(43202),m=r(64177),f=r(80803),v=r(9406),x=r(72762),h=r(82332),g=r(72677),C=r(5632),b=r(98723);function _(e){var t=e.sortOptionId,r=e.sortOptionTitle,i=e.isActive,n=e.onClick,o=e.isLink,a=e.CROId,c=(0,C.useRouter)().asPath,d=(0,l.useMemo)(function(){var e=/sort_(.+)\//;return e.test(c)?c.replace(e,function(e,r){return"sort_".concat(t)}):"sort_".concat(t)},[c,t]);return o?(0,s.jsx)(b.r,{className:(0,g.d)("cursor-pointer whitespace-nowrap",{"text-body-2 text-neutral-500":!i,"text-body2-strong text-primary-700":i}),to:d,CROId:a,children:r}):(0,s.jsx)("span",{className:(0,g.d)("cursor-pointer whitespace-nowrap",{"text-body-2 text-neutral-500":!i,"text-body2-strong text-primary-700":i}),onClick:function(e){return n(e,t)},"data-cro-id":a,children:r})}var y=r(15047),j=r(91509),I=r.n(j),P="مرتب سازی:";function O(e){var t=e.sort,r=e.onSortOptionClick,C=e.shouldCloseOnDismiss,b=e.pager,j=e.pending,O=e.isLink,w=e.className,N=e.shouldShowSortTitle,L=e.itemTitle,k=void 0===L?u.L:L,S=e.sortItemCROId,T=e.rightIconCRO,R=e.onSortIconClick,F=e.onSortItemClick,E=(0,m.C)(),A=E.isDesktop,Z=E.windowWidth,D=(0,f.d)(),M=D.isOpen,B=D.onClose,K=D.onOpen,H=t||{},z=H.sortOptions,W=H.sortDefaultOptionId,V=H.sortActiveOptionId,q=void 0===V?W:V,U=(0,l.useMemo)(function(){var e;return(null===(e=null==z?void 0:z.find(function(e){return(0,h.t)(e.sortOptionId,q)}))||void 0===e?void 0:e.sortOptionTitle)||P},[q,z]),J=(0,l.useCallback)(function(e,t){r(function(e){var r;return(0,o.Z)((0,n.Z)({},e),(r={},(0,i.Z)(r,p.uR,t),(0,i.Z)(r,p.tn,void 0),r))}),null==F||F(t)},[r]);return(0,s.jsxs)("div",{className:(0,g.d)("flex flex-row items-center gap-x-4",w),children:[!(0,v.e)()&&(0,s.jsx)(c.D,{rightIconCRO:T,onClick:function(){K(),null==R||R()},rightIcon:"sort",label:(void 0===N||N)&&(A?P:U),titleClassName:(0,g.d)("cursor-pointer whitespace-nowrap text-neutral-700 ",{"text-body2-strong":A,"text-subtitle-strong":!A})}),A?(0,s.jsx)("div",{className:I().HeaderSort__SortList,children:null==z?void 0:z.map(function(e){var t=e.sortOptionId,r=e.sortOptionTitle;return(0,s.jsx)(_,{sortOptionId:t,sortOptionTitle:r,isActive:(0,h.t)(t,q),onClick:J,isLink:O,CROId:S},t)})}):(0,s.jsx)(y.J,{isOpen:M,sortOptions:z,sortActiveOptionId:q,onSortOptionClick:J,onClose:B,shouldCloseOnDismiss:C,sortItemCROId:S}),!!b&&!(Z>=d.j.LG&&Z<d.j.XL)&&(0,s.jsx)("div",{className:"mr-auto block",children:(0,s.jsx)("span",{className:"text-neutral-500 whitespace-nowrap text-body-2 ellispis-1 xl:flex items-center gap-2",children:j?(0,s.jsx)(a.g,{}):"".concat((0,x.j)(null==b?void 0:b.pagerTotalItems,!0)," ").concat(k)})})]})}},15047:function(e,t,r){"use strict";r.d(t,{J:function(){return l}});var i=r(52322),n=r(50603),o=r(68437),s=r(82332);function l(e){var t=e.isOpen,r=e.sortOptions,l=e.onClose,a=e.shouldCloseOnDismiss,c=e.onSortOptionClick,d=e.sortActiveOptionId,u=e.sortItemCROId;return(0,i.jsx)(n.Modal,{isOpen:t,onDismiss:function(){a&&l()},bottomSheetContentClassName:"max-h-[70vh]",hasCloseIcon:!0,headerHideBottomBorder:!0,childrenClassName:"py-0 lg:py-4 px-5",headerTitle:" مرتب سازی بر اساس",children:(0,i.jsx)("div",{children:(void 0===r?[]:r).map(function(e,t,r){var n=e.sortOptionTitle,a=e.sortOptionId;return(0,i.jsx)(o.$Y,{title:n,isChecked:(0,s.t)(a,d),isBordered:t!==r.length-1,CROId:u,onClick:function(e){c(e,a),l()}},a)})})})}},27174:function(e,t,r){"use strict";r.d(t,{m:function(){return u}});var i=r(52322),n=r(98780),o=r(64177),s=r(72677),l=r(23154),a=r(5632),c=r(26442);function d(e){var t=e.className,r=e.data,d=e.handelDisplayResult,u=(0,o.C)().isDesktop,p=(0,a.useRouter)(),m=function(e){var t=e.categoryCode,r=e.categoryKeyword;return function(){d(!1),p.push((0,c.Gr)({url:(0,c.h1)(t),queries:{q:r},data:{}}))}},f=u?r:r.slice(0,2);return(0,i.jsx)("div",{className:(0,s.d)("flex items-center flex-col lg:flex-row lg:cursor-pointer",t,{"w-full":!u,"gap-2 flex-wrap":u}),children:null==f?void 0:f.map(function(e){return(0,i.jsxs)("div",{className:(0,s.d)("flex items-center py-1.5",{"border-complete-200 rounded-full px-2":u,"justify-between w-full border-complete-b-200 last:border-none":!u}),onClick:m({categoryCode:null==e?void 0:e.categoryCode,categoryKeyword:null==e?void 0:e.categoryKeyword}),children:[!u&&(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("span",{className:"text-neutral-500 ml-2 min-w-fit text-body-1",children:null==e?void 0:e.categoryKeyword}),(0,i.jsxs)("span",{className:"text-neutral-700 ellipsis-1 text-body-1",children:["در دسته ",null==e?void 0:e.categoryTitle]})]}),u&&(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("span",{className:"text-neutral-700 ml-2 text-body2-strong",children:null==e?void 0:e.categoryKeyword}),(0,i.jsxs)("span",{className:"text-neutral-500 text-body-2",children:["در ",null==e?void 0:e.categoryTitle]})]}),(0,i.jsx)(n.J,{icon:"chevronLeft",size:24,color:(0,l.$)("color-neutral-500"),className:"mr-1"})]})})})}function u(e){var t=e.className,r=e.categories,a=e.handelDisplayResult,c=e.pending,u=(0,o.C)().isDesktop;return(0,i.jsx)("div",{className:(0,s.d)(t,"rounded-medium lg:py-3 pt-2 pb-3 lg:px-5 flex items-center w-full justify-between",{"border-complete-200":u&&!c,"bg-gray lg:h-[80px] h-[107px] mt-1.5 mb-3 lg:mt-0 mb-mb-0":c}),children:!c&&r&&(0,i.jsxs)("div",{className:(0,s.d)("flex justify-between flex-wrap lg:gap-y-2",{"flex-col items-start w-full":!u,"items-center":u}),children:[(0,i.jsxs)("div",{className:"flex",children:[u&&(0,i.jsx)("div",{className:"border-secondary-500 border-solid border-2 bg-secondary-100 rounded-full p-2 flex",children:(0,i.jsx)(n.J,{icon:"cube-cat-all",size:24,color:(0,l.$)("color-button-secondary")})}),(0,i.jsx)("span",{className:"lg:mx-3 mx-0 text-neutral-700 text-body1-strong flex items-center",children:"برای نتایج دقیق‌تر یک دسته‌بندی انتخاب کنید"})]}),r&&(0,i.jsx)(d,{data:r,handelDisplayResult:a})]})})}},98050:function(e,t,r){"use strict";r.d(t,{H:function(){return d}});var i=r(70865),n=r(52322),o=r(2784),s=r(99896),l=r(96057),a=r(16991),c=r(64177);function d(e){var t=(0,c.C)().windowWidth,r=(0,o.useMemo)(function(){return t<a.j.SM?s.p:l.b},[t]);return(0,n.jsx)(r,(0,i.Z)({},e))}},24687:function(e,t,r){"use strict";r.d(t,{c:function(){return eO}});var i=r(47842),n=r(70865),o=r(96670),s=r(26297),l=r(66383),a=r(23945),c=r(52322),d=r(2784),u=r(5632),p=r(57931),m=r(1958),f=r(27174),v=r(73092),x=r(64665),h=r(88413),g=r(93008),C=r(43202),b=r(26442),_=r(64177),y=r(51275),j=r(42306),I=r(9406),P=r(22848),O=r(72762),w=r(41435),N=r(72677),L=r(50020),k=r(5759),S=r(23075),T=r(59641),R=r(92886),F=r(41635),E=r(20995),A=r(45756),Z=r(60419);function D(e){var t=e.filters,r=e.params,i=e.changeParams,n=e.category,o=e.onClose,s=e.className,l=e.pending,a=(0,_.C)().isDesktop,d=(0,Z.E)({params:r,changeParams:i}),u=d.filterExtra,p=d.resetFilterExtra,m=d.filterOnClick,f=d.filterClear,v=d.hasFilter,h=d.queryParams,g=l&&((0,L.k)(t)||(0,w.x)(t));return(0,c.jsxs)(c.Fragment,{children:[!a&&(0,c.jsxs)("div",{className:"flex items-center justify-between grow-0 pb-4",children:[(0,c.jsx)(E.d,{isRoot:!u.isOpen,onClick:u.isOpen?p:o}),(0,c.jsx)("div",{className:"grow text-h5",children:u.isOpen?null==u?void 0:u.filterTitle:"فیلترها"}),u.isOpen||!v||(0,j.d)(x.X.AB_TEST_FILTER_NEW_DESIGN)?null:(0,c.jsx)("div",{"data-cro-id":A.h.PLP_FILTER_DELETE,className:"text-secondary-500 text-button-2 cursor-pointer",onClick:f,children:"حذف فیلتر‌ها"})]}),g?(0,c.jsx)(R.Z,{}):(0,c.jsx)(F.e,{className:s,filters:t,activeFilters:h,filterExtra:u,onChange:m,onClear:f,hasFilter:v,category:n})]})}var M=r(4236),B=r(68437),K=r(50603),H=r(47072),z=r(80803),W=r(46621),V=r.n(W);function q(e){var t=e.pager,r=e.changeParams,i=e.category,n=e.params,o=e.filters,s=e.pending,l=e.rightIconCRO,a=(0,z.d)(),d=a.isOpen,u=a.onClose,p=a.onOpen,m=Object.values(n).length>0;return(0,c.jsxs)("div",{className:"relative",onClick:p,children:[(0,c.jsx)(H.D,{rightIconCRO:l,rightIcon:"filter",label:"فیلتر",titleClassName:"cursor-pointer text-subtitle-strong whitespace-nowrap text-neutral-700 "}),m&&(0,c.jsx)("span",{className:(0,N.d)("bg-primary-700 rounded-circle absolute right-0",V()["ProductList__filterButton--active"])}),(0,c.jsx)(K.Modal,{isFullScreen:!0,isOpen:d,hasCloseIcon:!1,headerHideBottomBorder:!0,footer:(0,c.jsx)(B.ws,{pending:s,pagerTotalItems:null==t?void 0:t.pagerTotalItems,onClick:u}),children:(0,c.jsx)(D,{className:"py-4",filters:o,params:n,changeParams:r,category:i,onClose:u})})]})}function U(e){var t=e.sort,r=e.pager,i=e.pending,n=e.filters,o=e.params,s=e.changeParams,l=e.category,a=(0,_.C)().isDesktop;return(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"flex items-center border-complete-b-200 gap-4 sticky top-20 bg-neutral-000 lg:static",children:[!a&&!(0,I.e)()&&(0,c.jsx)(q,{params:o,pending:i,filters:n,changeParams:s,category:l,pager:r,rightIconCRO:A.h.PLP_FILTER_ICON}),!(0,I.e)()&&(0,c.jsx)(M.R,{sort:t,pager:a?r:void 0,onSortOptionClick:s,pending:i,className:"grow",sortItemCROId:A.h.PLP_SORT,rightIconCRO:A.h.PLP_SORT_ICON})]})})}var J=r(98050),G=(0,d.memo)(function(e){var t=e.page,r=void 0===t?{}:t,i=e.pageIndex,o=e.itemComponent,s=void 0===o?J.H:o,l=e.bannersComponent,a=e.showFirstAd,u=r||{},p=u.products,m=u.sidebarCPCProduct,f=a&&!(0,w.x)(m),v=(0,d.useMemo)(function(){return i*(p||[]).length},[p,i]);return(0,c.jsxs)(c.Fragment,{children:[f&&(0,c.jsx)("div",{className:V().ProductList__item,"data-product-index":v+1,children:(0,c.jsx)(s,(0,n.Z)({},m))},m.productId),(p||[]).map(function(e,t){return(0,c.jsx)("div",{className:V().ProductList__item,"data-product-index":v+t+(f?2:1),children:(0,c.jsx)(s,(0,n.Z)({},e))},(null==e?void 0:e.uniqueKey)||(null==e?void 0:e.productId))}),l&&(0,c.jsx)("section",{className:(0,N.d)(V().ProductList__banner),children:(0,c.jsx)(l,{page:r})})]})}),X=r(27876);function $(e){var t,r,s,l,a,u,p,m,f,v,x,h=e.fetchNextPage,b=e.hasNextPage,y=e.shouldShowClassicPagination,j=e.pager,I=e.pageNumber,P=e.pending,O=e.changeParams,w=e.showSkeleton,L=(0,_.C)().isDesktop,k=(r=(t={onIntersect:h,enabled:!!b&&!P&&!y}).root,s=t.onIntersect,a=void 0===(l=t.threshold)?.7:l,p=void 0===(u=t.rootMargin)?"0px":u,f=void 0===(m=t.enabled)||m,v=(0,d.useRef)(s),x=(0,d.useRef)(null),(0,d.useEffect)(function(){v.current=s},[s]),(0,d.useEffect)(function(){if(f){var e=new IntersectionObserver(function(e){return e.forEach(function(e){var t;return e.isIntersecting&&(null===(t=v.current)||void 0===t?void 0:t.call(v))})},{root:r&&r.current,rootMargin:p,threshold:a}),t=x.current;if(t)return e.observe(t),function(){e.unobserve(t)}}},[r,f,p,a]),{targetRef:x}).targetRef,S=(0,d.useCallback)(function(e){O(function(t){return(0,o.Z)((0,n.Z)({},t),(0,i.Z)({},C.tn,e))})},[O]),T=I||(null==j?void 0:j.pagerCurrentPage),R=(0,d.useMemo)(function(){return Array.from({length:L?5:3},function(e,t){return{productId:t,isSkeleton:!0}})},[L]);return(0,c.jsxs)(c.Fragment,{children:[!y&&(0,c.jsx)("span",{className:(0,N.d)("w-full",V().ProductList__banner),ref:k}),(!y&&T<Math.min(g.yo,(null==j?void 0:j.pagerTotalPages)||1)||w||P)&&(0,c.jsx)(G,{page:{products:R},pageIndex:I}),y&&(0,c.jsx)("div",{className:(0,N.d)("w-full",V().ProductList__banner),ref:k,children:(0,c.jsx)(X.t,{clickAction:S,pagerCurrentPage:T,pagerTotalPages:null==j?void 0:j.pagerTotalPages,className:V().ProductList__pagination})})]})}var Y=r(15047),Q=r(88960),ee=r(67948),et=r(52216),er=r(77455),ei=r.n(er),en=(0,d.forwardRef)(function(e,t){var r=e.className,i=e.isSkeleton,o=e.badgeCount,l=e.isActive,a=e.activeColor,d=(0,s.Z)(e,["className","isSkeleton","badgeCount","isActive","activeColor"]);return void 0!==i&&i?(0,c.jsx)(ee.$,{}):(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(Q.Af,(0,n.Z)({className:r,isActive:void 0!==l&&l,activeColor:a,ref:t},d)),!!o&&(0,c.jsx)("div",{className:(0,N.d)("flex flex-col items-center justify-center absolute -top-1 left-0 rounded-full w-5 h-5 bg-primary-700 text-neutral-000",ei().badgeBorder),children:(0,et.U)(o)})]})}),eo=r(82332);function es(e){var t=e.sort,r=e.onSortOptionClick,s=e.shouldCloseOnDismiss,a=e.className,u=e.sortItemCROId,p=e.rightIconCRO,m=e.showChipLabel,f=(0,d.useRef)(),v=(0,l.Z)((0,d.useState)("100%"),2),x=v[0],h=v[1],g=(0,d.useRef)("100%"),b=(0,z.d)(),_=b.isOpen,y=b.onClose,j=b.onOpen,I=t||{},P=I.sortOptions,O=I.sortDefaultOptionId,w=I.sortActiveOptionId,L=void 0===w?O:w,k=(0,d.useMemo)(function(){var e;return g.current="auto",f.current&&h(g.current),(null===(e=null==P?void 0:P.find(function(e){return(0,eo.t)(e.sortOptionId,L)}))||void 0===e?void 0:e.sortOptionTitle)||"مرتب سازی:"},[L,P]);(0,d.useEffect)(function(){if(m){var e=setTimeout(function(){45!==f.current.offsetWidth&&(g.current=f.current.offsetWidth),h(g.current)},500);return function(){return clearTimeout(e)}}},[m,k]);var S=(0,d.useCallback)(function(e,t){r(function(e){var r;return(0,o.Z)((0,n.Z)({},e),(r={},(0,i.Z)(r,C.uR,t),(0,i.Z)(r,C.tn,void 0),r))})},[r]);return(0,c.jsxs)("div",{className:(0,N.d)("flex flex-row items-center gap-x-4",a),children:[(0,c.jsx)(en,{style:{width:m?x:"45px"},label:m?k:"",CROId:p,activeColor:"primary-bg-white",className:(0,N.d)("text-body-2 pointer whitespace-nowrap lg:my-2 inline-block py-1 px-3 shadow-none","max-w-52 min-w-[45px] transition-all duration-500 overflow-hidden"),icon:"sort",iconPosition:"right",size:"small",onClick:j,onIconClick:j,ref:f}),(0,c.jsx)(Y.J,{isOpen:_,sortOptions:P,sortActiveOptionId:L,onSortOptionClick:S,onClose:y,shouldCloseOnDismiss:s,sortItemCROId:u})]})}function el(e){var t=e.totalItems,r=e.hasActiveFilter,i=e.clearFilter,n=e.showAllProducts,o=e.loading;return(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2.5",children:[(0,c.jsxs)(p.z,{shape:"filled",color:"primary",size:"medium",className:"flex-auto",onClick:n,loading:o,children:["مشاهده ",(0,O.j)(t,!0)," محصول"]}),(0,c.jsx)(p.z,{shape:"outlined",color:"primary",size:"medium",onClick:i,disabled:!r,className:"flex-auto",children:"حذف فیلتر"})]})}function ea(e){var t=e.pager,r=e.changeParams,i=e.category,n=e.params,o=e.filters,s=e.pending,l=e.rightIconCRO,a=e.clearFilter,d=e.chipLabel,u=(0,z.d)(),p=u.isOpen,m=u.onClose,f=u.onOpen,v=["no_redirect","camCode","q","brandCode","categoryCode","sort","promo_name","promo_position","promo_creative","bCode"],h=Object.keys(n).filter(function(e){return!v.includes(e)}).length+(n.attributes?Object.keys(n.attributes).length-1:0),g=h>0;return(0,c.jsxs)("div",{className:"relative",onClick:f,children:[(0,c.jsx)(en,{style:{maxWidth:"200px",width:d?"66px":"45px",transition:"all 0.5s",overflow:"hidden"},CROId:l,activeColor:"borderless",className:"text-body-2 pointer lg:my-2 inline-block py-1 px-3 shadow-none",icon:"filter",iconPosition:"right",isActive:g,size:"small",label:d,badgeCount:h,onClick:f,onIconClick:f}),(0,c.jsx)(K.Modal,{isFullScreen:!0,isOpen:p,hasCloseIcon:!1,headerHideBottomBorder:!0,footer:(0,j.d)(x.X.AB_TEST_FILTER_NEW_DESIGN)?(0,c.jsx)(el,{loading:s,showAllProducts:m,totalItems:null==t?void 0:t.pagerTotalItems,hasActiveFilter:g,clearFilter:function(){a(),m()}}):(0,c.jsx)(B.ws,{pending:s,pagerTotalItems:null==t?void 0:t.pagerTotalItems,onClick:m}),children:(0,c.jsx)(D,{className:"py-4",filters:o,params:n,changeParams:r,category:i,onClose:m})})]})}var ec=r(9378),ed=r(29890);function eu(e){var t=e.filterKey,r=e.filterTitle,s=e.filterType,l=e.onChange,a=e.activeFilterOptions,u=e.filterOptions,p=e.category,m=e.filterOptionMin,f=e.filterOptionMax,v=e.filterCroId,x=(0,d.useMemo)(function(){return(0,ed.k)(a)?null==a?void 0:a.reduce(function(e,t){return(0,o.Z)((0,n.Z)({},e),(0,i.Z)({},t,u.find(function(e){return(0,eo.t)(e.filterOptionId,t)})))},{}):a},[a])||{};return(0,c.jsx)("div",{children:(0,c.jsx)(ec.J,{filterTitle:r,category:p,activeFilterOptionsObj:x,filterKey:t,filterOptions:u,filterType:s,onChange:l,filterCroId:void 0===v?"":v,filterOptionMin:m,filterOptionMax:f})})}function ep(e){var t=e.onSingleFilterClick,r=e.selectedFilters,i=e.unselectedFilters;return(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[null==r?void 0:r.map(function(e,r){var i=function(){return t(e)};return(0,c.jsx)(en,{activeColor:"borderless",className:"text-body-2 pointer lg:my-2 inline-block py-1 px-3 shadow-none truncate",label:e.filterTitle,size:"small",onClick:i,onIconClick:i,icon:"switch"!==e.filterType?"chevronDown":void 0,iconPosition:"left",isActive:!0},"".concat(e.filterTitle,"-").concat(r))}),null==i?void 0:i.map(function(e,r){var i=function(){return t(e)};return(0,c.jsx)(en,{activeColor:"primary-bg-white",className:"text-body-2 pointer lg:my-2 inline-block py-1 px-3 shadow-none truncate",label:e.filterTitle,size:"small",onClick:i,onIconClick:i,icon:"switch"!==e.filterType?"chevronDown":void 0,iconPosition:"left"},"".concat(e.filterTitle,"-").concat(r))})]})}var em=r(55357),ef=r(43898),ev=r(69168),ex=r(98634),eh=r(14529),eg=r(23004);function eC(e){var t,r,i,n,o,s,a,p,m,f,v,x,g,C,b,y,j,P,O,L,k,S,T,R,F,E,D,M,B,H,W,V,q,U,J,G=e.sort,X=e.pager,$=e.pending,Y=e.filters,Q=e.params,ee=e.changeParams,et=e.category,er=e.isScrolledPage,ei=(o=(t={changeParams:ee,params:Q,filters:Y}).params,s=t.changeParams,a=t.filters,p=function(e){var t=e||{},r=t.isAccordion,i=t.filterKey,n=t.filterOptionId;if(!r){var o,s,l=b||{},a=l.filterTitle,c=l.filterOptions,d=(null==c?void 0:c.find(function(e){return e.filterOptionId===n}))||{},u=d.filterOptionTitle,p=d.filterOptionTitleEn,m=d.filterOptionTitleFa,f=(0,eg.p)(i);(0,ev.zZ)({filterTitle:(0,w.x)(d)?void 0:a,filterKey:(0,eh.K)(i)?null==i?void 0:i.keyCode:i,filterOptionToggle:(0,w.x)(d)?!f:void 0,filterOptionName:p||u||m||a,breadcrumbs:U,type:(null==q?void 0:null===(o=q.asPath)||void 0===o?void 0:null===(s=o.includes)||void 0===s?void 0:s.call(o,h.fc))?ef.k.PLP_USAGE_AMAZING:ef.k.PLP_USAGE_PLP})}O(e),J()},m=(0,_.C)().isDesktop,v=(f=(0,z.d)()).isOpen,x=f.onClose,g=f.onOpen,b=(C=(0,l.Z)((0,d.useState)(),2))[0],y=C[1],P=(j=(0,Z.E)({params:o,changeParams:s})).queryParams,O=j.filterOnClick,L=j.filterClear,k=j.activeFilters,S=j.removeFilterItem,T=(0,d.useRef)(null),F=(R=(0,l.Z)((0,d.useState)(!1),2))[0],E=R[1],(0,d.useEffect)(function(){var e,t=T.current,r=(0,ex.P2)(function(e){requestAnimationFrame(function(){E(e.target.scrollLeft<-10)})},100);return null===(e=T.current)||void 0===e||e.addEventListener("scroll",r),function(){return t.removeEventListener("scroll",r)}},[]),D=(0,d.useCallback)(function(e){var t=Object.keys(P),r=[],i=[];return null==e||e.forEach(function(e){var n;((0,eh.K)(e.filterKey)?(null==P?void 0:null===(n=P.attributes)||void 0===n?void 0:n[e.filterKey.keyId])!==void 0:t.includes(e.filterKey))?r.push(e):i.push(e)}),{selectedFilters:r,unselectedFilters:i}},[P]),B=(M=(0,d.useMemo)(function(){return D(a)},[a,D])).selectedFilters,H=M.unselectedFilters,W=(0,d.useMemo)(function(){return B.some(function(e){var t,r;return e.filterKey===(null==b?void 0:b.filterKey)||(null===(t=e.filterKey)||void 0===t?void 0:t.keyId)===(null==b?void 0:null===(r=b.filterKey)||void 0===r?void 0:r.keyId)})},[b,B]),V=(0,em.et)().data,q=(0,u.useRouter)(),U=(V||{}).breadcrumbs,J=function(){T.current.scrollTo(0,0)},{onChangeHandler:p,activeFilter:(0,eh.K)(null==b?void 0:b.filterKey)?null===(r=k[null==b?void 0:null===(i=b.filterKey)||void 0===i?void 0:i.keyCode])||void 0===r?void 0:r[null==b?void 0:null===(n=b.filterKey)||void 0===n?void 0:n.keyId]:k[null==b?void 0:b.filterKey],onSingleFilterClick:function(e){y(e),"switch"!==e.filterType?g():p({filterKey:null==e?void 0:e.filterKey,filterType:null==e?void 0:e.filterType,filterOptionId:1})},isDesktop:m,filter:b,onClose:x,isOpen:v,queryParams:P,filterClear:L,removeFilterItem:S,filterScrollRef:T,isScrolled:F,selectedFilters:B,unselectedFilters:H,hasActiveFilter:W}),en=ei.activeFilter,eo=ei.onChangeHandler,ec=ei.onSingleFilterClick,ed=ei.isDesktop,eC=ei.filter,eb=ei.isOpen,e_=ei.onClose,ey=ei.filterClear,ej=ei.removeFilterItem,eI=ei.isScrolled,eP=ei.filterScrollRef,eO=ei.selectedFilters,ew=ei.unselectedFilters,eN=ei.hasActiveFilter;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,N.d)("flex items-center -mx-5 pr-3 pb-2 lg:pt-3 pt-1 gap-1 bg-neutral-000 lg:static hide-scrollbar overscroll-none",{"border-complete-b-200":er}),children:[(0,w.x)(Y)?null:(0,c.jsxs)(c.Fragment,{children:[!(0,I.e)()&&G.sortOptions&&(0,c.jsx)(es,{shouldCloseOnDismiss:!0,sortItemCROId:A.h.PLP_SORT,rightIconCRO:A.h.PLP_SORT_ICON,showChipLabel:!eI,sort:G,onSortOptionClick:ee}),!ed&&!(0,I.e)()&&(0,c.jsx)(ea,{clearFilter:ey,params:Q,pending:$,filters:Y,changeParams:ee,category:et,pager:X,rightIconCRO:A.h.PLP_FILTER_ICON,chipLabel:eI?"":"فیلتر"})]}),(0,c.jsx)("div",{className:(0,N.d)("flex items-center overflow-scroll pl-3 hide-scrollbar overscroll-none",{"border-complete-r-200":eI}),ref:eP,children:(0,c.jsx)(ep,{onSingleFilterClick:ec,selectedFilters:eO,unselectedFilters:ew})})]}),(0,c.jsx)(K.Modal,{headerTitle:null==eC?void 0:eC.filterTitle,shouldCloseOnPageChange:!1,isOpen:eb,onDismiss:e_,hasCloseIcon:!0,headerHideBottomBorder:!0,bottomSheetContentClassName:"max-h-[70vh] rounded-t-large",footer:(0,c.jsx)(el,{loading:$,showAllProducts:e_,clearFilter:function(){ej(null==eC?void 0:eC.filterKey),e_()},totalItems:null==X?void 0:X.pagerTotalItems,hasActiveFilter:eN}),children:!(0,w.x)(eC)&&(null==eC?void 0:eC.filterType)!=="switch"&&(0,c.jsx)(eu,{category:et,activeFilterOptions:en,onChange:eo,filterKey:eC.filterKey,filterOptions:eC.filterOptions,filterTitle:eC.filterTitle,filterType:eC.filterType,filterOptionMin:eC.filterOptionMin,filterOptionMax:eC.filterOptionMax,filterCroId:""})})]})}var eb=r(72610),e_=r(12317);function ey(e){var t=e.totalItems,r=e.pending,i=e.className,n=(0,T.a)({term:"search/ai"});return(0,c.jsxs)("div",{className:(0,N.d)("flex items-center justify-between pt-3 text-neutral-500",i),children:[(0,c.jsx)("span",{className:"grow text-body1-strong",children:n?"همه کالاها (جستجوشده در تصویرها)":"همه کالاها"}),(0,c.jsx)("div",{className:"mr-auto block lg:hidden xl:block",children:(0,c.jsx)("span",{className:"whitespace-nowrap text-body-2 ellispis-1 flex items-center gap-2",children:r?(0,c.jsx)(eb.g,{}):"".concat((0,O.j)(t,!0)," ").concat(e_.L)})})]})}var ej={},eI=(0,j.d)(x.X.PLP_INFINITE_SCROLL),eP={};function eO(e){var t,r=e.pages,R=void 0===r?[]:r,F=e.data,E=e.pending,A=void 0!==E&&E,Z=e.fetchNextPage,M=e.hasNextPage,B=e.pageNumber,K=void 0===B?1:B,H=e.shouldHideProductListHeader,z=(e.productListHeaderSlot,e.shouldHideDesktopSidebar),W=e.sidebarSlot,q=e.stickyBottomSlot,J=e.stickySlot,X=e.showFirstAd,Y=e.params,Q=void 0===Y?{}:Y,ee=e.changeParams,et=e.itemsKey,er=void 0===et?"products":et,ei=e.disableClassicPagination,en=void 0===ei?eI:ei,eo=e.itemComponent,es=e.wrapperClassName,el=e.emptyComponent,ea=void 0===el?(0,c.jsx)(v.T,{}):el,ec=e.bannersComponent,ed=e.handelDisplayResult,eu=e.categoryResultSearch,ep=e.hasSearchInstead,em=e.advertisementProducts,ef=e.advertisementBrand,ev=e.advertisementSponsoredBrand,ex=e.pendingAutoComplete;(0,d.useLayoutEffect)(function(){if((0,j.d)(x.X.LITE_PLP_PRESERVE_SCROLL)){var e=eP[window.location.href];if("number"==typeof e){var t=function(){window.scrollTo(0,e),u.Router.events.off("routeChangeComplete",t)};return u.Router.events.on("routeChangeComplete",t),function(){u.Router.events.off("routeChangeComplete",t)}}}},[]),(0,d.useEffect)(function(){if((0,j.d)(x.X.LITE_PLP_PRESERVE_SCROLL)){var e=function(){eP[window.location.href]=window.scrollY};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}},[]);var eh=F||ej,eg=eh.sort,eb=eh.pager,e_=eh.filters,eO=eh.category,ew=Q||ej,eN=ew[C.uR],eL=ew[C.tn],ek=(ew[C.fH],(0,s.Z)(ew,[C.uR,C.tn,C.fH].map(a.Z))),eS=(0,k.h)(eL),eT=(0,y.pL)()||{},eR=eT.cartPayablePrice,eF=eT.cartPrice,eE=(0,d.useRef)(),eA=(0,T.a)({term:"search/ai"}),eZ=(0,T.a)({term:"search/"}),eD=(0,_.C)().isDesktop,eM=(0,I.e)(),eB=(0,d.useMemo)(function(){return z||!eD||!A&&(0,w.x)(e_)||eM},[eD,z,A,e_,eM]),eK=(K>=g.yo||eS)&&!en,eH=(0,d.useMemo)(function(){return((K>g.yo||eS)&&!en?[[K,R[K]]]:Object.entries(R)).filter(function(e){var t=(0,l.Z)(e,2)[1];return!(0,L.k)(t)&&!(0,w.x)(t)})},[R,K,en,eS]),ez=(0,d.useMemo)(function(){var e,t;return!A&&(0,w.x)(null===(e=Object.entries(R)[0])||void 0===e?void 0:null===(t=e[1])||void 0===t?void 0:t[er])},[A,R,er]),eW=(0,d.useMemo)(function(){return!A&&(0,w.x)(F)},[A,F]),eV=!H&&!eW;(0,d.useEffect)(function(){return document.body.classList.add("overscroll-y-none"),function(){document.body.classList.remove("overscroll-y-none")}},[]);var eq=(0,l.Z)((0,d.useState)(!1),2),eU=eq[0],eJ=eq[1];(0,d.useLayoutEffect)(function(){var e=function(){eE.current&&eJ(eE.current.getBoundingClientRect().top<0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[eE]);var eG=(0,d.useMemo)(function(){return(0,w.x)(e_)?null:eV&&(0,j.d)(x.X.AB_TEST_FILTER_NEW_DESIGN)&&!eD?(0,c.jsx)(eC,{sort:(0,o.Z)((0,n.Z)({},eg),{sortActiveOptionId:eN}),pager:eb,pending:A,filters:e_,params:Q,changeParams:ee,category:eO,isScrolledPage:eU}):(0,c.jsx)(U,{sort:(0,o.Z)((0,n.Z)({},eg),{sortActiveOptionId:eN}),pager:eb,pending:A,filters:e_,params:ek,changeParams:ee,category:eO})},[eV,eO,ee,e_,eD,eU,ek,eb,Q,A,eg,eN]);return(0,c.jsxs)("div",{id:"ProductListPagesWrapper",className:(0,N.d)("relative w-full flex flex-col lg:flex-row items-center lg:items-stretch justify-between",V().ProductList__wrapper,es),ref:eE,children:[(0,c.jsxs)("section",{className:"w-full grow relative",children:[(0,c.jsx)("div",{className:(0,N.d)("lg:static sticky lg:top-14 top-16 bg-neutral-000 z-2",{"top-14":eZ&&!eA}),children:eG}),!eD&&(0,w.x)(ep)&&eu&&!(0,P.J)()&&!eA&&(0,c.jsx)(f.m,{handelDisplayResult:ed,categories:eu,pending:ex}),!eD&&(!(0,w.x)(em)||!(0,w.x)(ef))&&!eA&&(0,c.jsx)(S.y,{advertisement:ev,position:h.BE.TOP_FILTER,className:(0,N.d)("mb-0 lg:mb-5 -mx-5 lg:mx-0",{"border-complete-t-200":(0,w.x)(ep)&&eu})}),!eD&&eb&&(0,c.jsx)(ey,{totalItems:null==eb?void 0:eb.pagerTotalItems,pending:A,className:"border-complete-t-200 mx-[-20px] px-6"}),(0,c.jsxs)("div",{className:(0,N.d)(V().ProductList__pagesContainer,(t={},(0,i.Z)(t,V()["ProductList__pagesContainer--withSidebar"],!eB||eM),(0,i.Z)(t,V()["ProductList__pagesContainer--withoutSidebar"],eB||!eM),t)),children:[ez?(0,c.jsx)("div",{className:V().ProductList__emptyWrapper,children:ea}):eH.map(function(e,t){var r=(0,l.Z)(e,2),i=r[0],n=r[1];return(0,c.jsx)(G,{page:n,bannersComponent:ec,pageIndex:t,itemComponent:eo,showFirstAd:X&&!eD},i)}),(0,c.jsx)($,{fetchNextPage:Z,hasNextPage:void 0!==M&&M,pager:eb,pageNumber:K,pending:A,showSkeleton:(0,w.x)(eH),shouldShowClassicPagination:eK,changeParams:ee})]})]}),!eB&&(0,c.jsxs)("section",{className:(0,N.d)("flex flex-col",V().ProductList__sidebar),children:[W,(0,c.jsxs)(m.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:[J,eD&&(0,c.jsx)(D,{filters:e_,params:ek,changeParams:ee,pending:A,category:eO}),(0,c.jsx)("div",{className:"py-3"}),q]})]}),(0,I.e)()&&eD&&(0,c.jsx)("section",{className:(0,N.d)("flex flex-col mt-16",V().ProductList__coupon),children:(0,c.jsx)(m.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:(0,c.jsxs)("div",{className:(0,N.d)("border-complete border-neutral-300 p-4 rounded-lg background-white"),children:[(0,c.jsx)("div",{className:"text-neutral-500 text-lg",children:"شما در اینجا جمع هزینه‌ی کالا‌های کالابرگی را بدون احتساب تخفیف کالابرگ مشاهده می‌کنید"}),(0,c.jsx)("div",{className:"border-complete-b border-b-neutral-500 h-1 my-4"}),(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex w-full",children:[(0,c.jsx)("span",{children:"جمع مبلغ سبد کالابرگی"}),(0,c.jsxs)("div",{className:"mr-auto",children:[(0,c.jsxs)("span",{className:"bold",children:[(0,O.j)(eF)," "]}),(0,c.jsx)("span",{className:"font-bold",children:"تومان"})]})]}),(0,c.jsx)(p.z,{className:"mt-4 w-full",disabled:!eR,to:(0,b.qR)(),children:"تایید و تکمیل سفارش"})]})]})})})]})}},12317:function(e,t,r){"use strict";r.d(t,{L:function(){return i}});var i="کالا"},33846:function(e,t,r){"use strict";r.d(t,{Z:function(){return i.Z}});var i=r(16514)},91509:function(e){e.exports={HeaderSort__SortList:"styles_HeaderSort__SortList__OPEV3"}},46621:function(e){e.exports={ProductList__wrapper:"product-list_ProductList__wrapper__Evjm8",ProductList__pagesContainer:"product-list_ProductList__pagesContainer__zAhrX",ProductList__item:"product-list_ProductList__item__LiiNI","ProductList__pagesContainer--withoutSidebar":"product-list_ProductList__pagesContainer--withoutSidebar__aty9j","ProductList__pagesContainer--withSidebar":"product-list_ProductList__pagesContainer--withSidebar__17nz1",ProductList__pageContainer:"product-list_ProductList__pageContainer__M9Ix_",ProductList__product:"product-list_ProductList__product___snwh",ProductList__banner:"product-list_ProductList__banner__Mxvqm",ProductList__sidebar:"product-list_ProductList__sidebar__N_suS",ProductList__coupon:"product-list_ProductList__coupon__0R30S",ProductList__pagination:"product-list_ProductList__pagination__vx69z","ProductList__filterButton--active":"product-list_ProductList__filterButton--active__O1Y21",ProductList__emptyWrapper:"product-list_ProductList__emptyWrapper__Hh8Ij"}},77455:function(e){e.exports={badgeBorder:"styles_badgeBorder__L6eO8"}}}]);